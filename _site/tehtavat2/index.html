<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Viikko 2</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/tehtavat2/">
  <link rel="alternate" type="application/rss+xml" title="Ohjelmistotuotanto avoin yliopisto 2020" href="/feed.xml">

  
</head>


  <body>
    
    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Ohjelmistotuotanto avoin yliopisto 2020</a>
    
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/osa0/">Osa 0</a>
            
          
            
            
            <a class="page-link" href="/osa1/">Osa 1</a>
            
          
            
            
            <a class="page-link" href="/osa2/">Osa 2</a>
            
          
            
            
            <a class="page-link" href="/osa3/">Osa 3</a>
            
          
            
            
            <a class="page-link" href="/osa4/">Osa 4</a>
            
          
            
            
            <a class="page-link" href="/osa5/">Osa 5</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/tehtavat/">Tehtävät</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
          
        </div>
      </nav>
    

    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <h2 id="viikko-2">Viikko 2</h2>

<p>Viikon ensimmäisessä tehtävässä tutustutaan tarkemmin gradleen. Toinen ja kolmas tehtävä käsittelevät koodin <em>staattisen analyysin</em> työkalua checkstyleä. Gitiin tutustuminen jatkuu tehtävissä 4-8. Laskarien lopuksi jatketaan <em>riippuvuuksien injektoinnin</em> parissa.</p>

<h3 id="typoja-tai-epäselvyyksiä-tehtävissä">Typoja tai epäselvyyksiä tehtävissä?</h3>

<p>Tee <a href="/osa0#typoja-materiaalissa">korjausehdotus</a> editoimalla <a href="https://github.com/ohjelmistotuotanto-hy/ohjelmistotuotanto-hy.github.io/blob/master/tehtavat2.md">tätä</a> tiedostoa GitHubissa.</p>

<h3 id="tehtävien-palauttaminen">Tehtävien palauttaminen</h3>

<p>Osa git-tehtävistä (tehtävät 4-6) tehdään ainoastaan paikalliseen repositorioon, eli ne eivät näy palautuksessa mitenkään.</p>

<p>Muut tehtävät palautetaan GitHubiin, sekä merkitsemällä tehdyt tehtävät palautussovellukseen <a href="https://study.cs.helsinki.fi/stats/courses/ohtu-avoin-2020">https://study.cs.helsinki.fi/stats/courses/ohtu-avoin-2020</a></p>

<p>Tehtävät 2 ja 3 laajentavat viime viikon ensimmäistä tehtäväsarjaa, eli ne palautetaan samaan repositorioon kuin Ohtuvarasto. Muut tehtävät voit palauttaa samaan repositorioon mihin palautit ensimmäisen viikon tehtävät 14-16.</p>

<p>Katso tarkempi ohje palautusrepositorioita koskien <a href="/tehtavat1#teht%C3%A4vien-palautusrepositoriot">täältä</a>.</p>

<h3 id="huomio-gradleen-liittyen">Huomio gradleen liittyen</h3>

<p>Käytämme tälläkin viikolla gradle-muotoisia projekteja. Jos gradle-koodi lukee syötteitä komentoriviltä, tulee määrittelytiedostojen loppuun liittää seuraava</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">run</span> <span class="o">{</span>
    <span class="n">standardInput</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Ilman tätä määrittelyä ohjelmaa gradlella suorittaessa, eli komennolla <code class="highlighter-rouge">gradle run</code>, ohjelma ei pääse käsiksi syötevirtaan ja scannerin luominen epäonnistuu.</p>

<p>Tämän viikon tehtäviin liittyviin projekteihin määrittely on jo lisätty.</p>

<p>Jos ohjelma lukee syötteitä käyttäjältä, kannattaa se suorittaa komennolla <code class="highlighter-rouge">gradle -q --console plain run</code>, jolloin gradlen tekemät tulostukset eivät tule konsoliin.</p>

<p><em>HUOM!</em> näyttää siltä, että NetBeans 11.1:llä Scanner ei toimi ollenkaan gradle-projekteissa, eli jos törmäät samaan ongelmaan, suorita ohjelmat komentoriviltä.</p>

<h3 id="1-gradlen-perusteita">1. gradlen perusteita</h3>

<p>Olemme jo käyttäneet gradlea hyvällä menestyksellä viikon ajan. Tutustutaan nyt gradleen hieman tarkemmin tekemällä <a href="/gradle/">täällä</a> oleva interaktiivinen “tutoriaali”.</p>

<h3 id="2-lisää-gradlea-koodin-staattinen-analyysi">2. lisää gradlea: koodin staattinen analyysi</h3>

<p>Kurssin <a href="/osa3">kolmannessa osassa</a> teemana on ohjelmien laadun varmistaminen. Eräs ohjelman laatua useimmiten edistävä tekijä on järkevän <em>koodityylin</em> noudattaminen.  Koodin tyyliä voidaan tarkkailla automatisoidusti ns. staattisen analyysin työkaluilla.</p>

<p>Tutustutaan nyt staattisen analyysin työkaluun <a href="https://checkstyle.sourceforge.net/">checkstyleen</a>, jonka käyttäminen on suhteellisen vaivatonta gradlen <a href="https://docs.gradle.org/current/userguide/checkstyle_plugin.html">checkstyle-pluginin</a> avulla.</p>

<p>Mene nyt viikon 1 tehtävien <em>Ohtuvarastoon</em> liittyvien tehtävien palautusrepositorioosi.</p>

<p>Lisää projektiin checkstyle-plugin <a href="https://docs.gradle.org/current/userguide/checkstyle_plugin.html">tämän ohjeen mukaan</a>, eli lisäämällä konfiguraationtiedoston <em>build.gradle</em> <strong>alkuun</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plugins {
    id 'checkstyle'
}
</code></pre></div></div>

<p>Suorita komento <code class="highlighter-rouge">gradle checkstyleMain</code></p>

<p>Suoritus epäonnistuu, virheilmoitus kertoo mistä kyse:</p>

<pre>
* What went wrong:
Execution failed for task ':checkstyleMain'.
&gt; Unable to create Root Module: config {/Users/mluukkai/opetus/ohtu2019/ohtu-2019-viikko1/config/checkstyle/checkstyle.xml}
</pre>

<p>Eli kuten <a href="https://docs.gradle.org/current/userguide/checkstyle_plugin.html#sec:checkstyle_project_layout">manuaali kertoo</a>, Gradle olettaa että projektista löytyy checkstylen toiminnan määrittelevä konfiguraatiotiedosto.</p>

<p>Luo tiedosto ja hae sille sisältö <a href="https://github.com/ohjelmistotuotanto-hy/syksy2019/blob/master/koodi/viikko2/checkstyle_gradle5.xml">täältä</a> tai <a href="https://github.com/ohjelmistotuotanto-hy/syksy2019/blob/master/koodi/viikko2/checkstyle.xml">täältä</a> jos käytössäsi on gradlen versio 6.</p>

<p>Tiedostoissa on pieni ero, sillä tyylisääntö <em>LineLength</em> pitää määritellä gradle 6:ssa, <em>TreeWalker</em>-moduulin ulkopuolella.</p>

<p>Huomaa, että tiedoston tulee olla oikeassa paikassa. Virheilmoitus ja <a href="https://docs.gradle.org/current/userguide/checkstyle_plugin.html#sec:checkstyle_project_layout">manuaali</a> kertovat oikean sijainnin.</p>

<p>Kun nyt suoritat komennon <code class="highlighter-rouge">gradle checkstyleMain</code>, tulee jälleen virhe, mutta nyt virheen syynä on se, että koodi rikkoo konfiguraatiotiedostossa määriteltyjä tyylisääntöjä. Virheilmoitus kertoo raportin sijainnin:</p>

<pre>
* What went wrong:
Execution failed for task ':checkstyleMain'.
&gt; Checkstyle rule violations were found. See the report at: file:///Users/mluukkai/opetus/ohtu2019/ohtu-2019-viikko1/build/reports/checkstyle/main.html
</pre>

<p>Avaa raportti selaimella. Huomaat, että tuloksena on suuri määrä virheitä. Valitettavasti virheraportti kertoo ainoastaan sen koodirivin, mistä virhe löytyy. Joudut katsomaan vastaavan kohdan koodistasi esim. NetBeansista.</p>

<p><strong>Toimi nyt seuraavasti</strong></p>

<ul>
  <li>Poista checkstylen konfiguraatiotiedostosta kaikki elementin <code>Tree Waker</code> sisällä olevat tarkistukset (gradlen versiota 6 käyttäessäsi poista myös <em>LineLength</em>)</li>
  <li>Suorita <code class="highlighter-rouge">gradle checkstyleMain</code> ja varmista, että tarkastus menee läpi</li>
  <li>Määrittele nyt tiedostoon seuraavat säännöt (ks. kohta checks checkstylen <a href="https://checkstyle.sourceforge.io/checks.html">sivuilta</a>):
    <ul>
      <li>metodien pituus max 15 riviä (tämä ja seuraavat säännöt määritellään moduulin tree walker sisälle)</li>
      <li>ei yli yhtä sisäkkäisiä if-komentoja</li>
      <li>ei sisäkkäisiä for-komentoja, seuraavan siis pitäisi aiheuttaa virhe:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="o">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
  <span class="k">for</span><span class="o">(</span> <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">j</span><span class="o">;</span> <span class="n">j</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"virhe"</span><span class="o">);</span>
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>koodi on oikein sisennettyä</li>
      <li>lohkon avaava aaltosulku on aina rivin lopussa, eli esim. ehtolauseissa aaltosulku tulee merkitä
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span> <span class="n">ehto</span> <span class="o">)</span> 
<span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"virhe"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>        </div>
        <p>sijaan seuraavasti:</p>
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span> <span class="n">ehto</span> <span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"virhe"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>syklomaattinen koodikompleksisuus korkeintaan 3 (selvitä mitä tarkoittaa!)</li>
    </ul>
  </li>
  <li>Muuta koodiasi siten, että saat jokaisen määritellyistä checkstyle-säännöistä rikkoutumaan</li>
  <li>Korjaa koodisi ja varmista, että se noudattaa kaikkia sääntöjä
    <ul>
      <li>pääohjelman koodin voi poistaa tarvittaessa kokonaan, jotta saat koodin säännönmukaiseksi</li>
    </ul>
  </li>
</ul>

<h3 id="3-koodin-staattinen-analyysi-pilvessä">3. Koodin staattinen analyysi pilvessä</h3>

<p>Viime viikon <a href="https://github.com/mluukkai/ohjelmistotuotanto2018/blob/master/laskarit/1.md#12-codecov">tehtävässä 12</a> konfiguroimme <a href="https://codecov.io">https://codecov.io</a>-palvelun tarkkailemaan koodin testauskattavuutta.</p>

<p><a href="https://codeclimate.com/">Code climate</a> on palvelu, jonka avulla voimme suorittaa helposti staattista analyysiä githubissa olevalle koodille.</p>

<p>Kirjaudu Code Climateen <a href="https://codeclimate.com/login/github/join">täällä</a>. Valitse <em>open source</em>:</p>

<p><img src="http://localhost:4000/images/lh2-3.png" alt="" /></p>

<p>ja sitten <em>add repository</em></p>

<p><img src="http://localhost:4000/images/lh2-4.png" alt="" /></p>

<p>Etsi Ohtuvaraston palautusrepositoriosi listalta ja valitse <em>add repo</em>.</p>

<p>Hetken kuluttua koodillesi on tehty ensimmäinen analyysi</p>

<p><img src="http://localhost:4000/images/lh2-5.png" alt="" /></p>

<p>Välilehden <em>repo settings</em> osasta <em>maintainability</em> näet Code climaten tekemät oletusarvoiset tarkastukset:</p>

<p><img src="http://localhost:4000/images/lh2-7.png" alt="" /></p>

<p>Konfiguroi Code climate käyttämään checkstyleä <a href="https://docs.codeclimate.com/docs/checkstyle">tämän ohjeen</a> mukaan. Tiedoston <em>checkstyle.xml</em> sijainti on sovelluksessasi hieman eri kuin ohjeen konfiguraatiossa.</p>

<p>Tee koodiisi jokin checkstylen rikkova virhe, ja varmista että virhe näkyy <em>issues</em>-välilehdellä:</p>

<p><img src="http://localhost:4000/images/lh2-8.png" alt="" /></p>

<p>Code climaten pitäisi tehdä koodillesi analyysi automaattisesti aina, kun pushaat uutta koodia githubiin. Joskus näin ei käy, syy on useimmiten siinä, että konfiguraatio on jollain tavalla hajonnut. Jos näin käy, voit katsoa miten edellisiin committeihin liittyvässä analyysissä on käynyt klikkaamalla edellisen buildin ajankohdasta kertovaa tekstiä</p>

<p><img src="http://localhost:4000/images/lh2-10.png" alt="" /></p>

<p>Joissain tilanteessa Code climate antaa kohtuullisen hyvän virheilmoituksen</p>

<p><img src="http://localhost:4000/images/lh2-9.png" alt="" /></p>

<h3 id="4-git-branchit-versionhallinta">4. git: branchit [versionhallinta]</h3>

<p>lue brancheja käsittelevät osuudet seuraavasta <a href="http://www.ralfebert.de/tutorials/git/">http://www.ralfebert.de/tutorials/git/</a></p>
<ul>
  <li>jos haluat lukea hieman perusteellisemman selityksen asiasta, lue <a href="http://git-scm.com/book">http://git-scm.com/book</a>:n luku kolme</li>
  <li>tee samalla kaikki tekstien esimerkit</li>
</ul>

<p>Kannattaa huomioida myös erittäin hyvä brancheja käsittelevä visuaalinen materiaali osoitteessa <a href="http://pcottle.github.com/learnGitBranching/">http://pcottle.github.com/learnGitBranching/</a></p>

<p>Varsin selkeältä vaikuttaa myös <a href="https://www.atlassian.com/git/tutorials/using-branches">https://www.atlassian.com/git/tutorials/using-branches</a></p>

<p><strong>huom:</strong> kun liikut branchien välillä kannattaa pitää working tree ja staging -alue tyhjinä!</p>

<p>tee seuraavat paikalliseen git-repositorioosi (kyseessä ei siis tarvitse olla tehtävien palautusrepositorio)</p>

<ul>
  <li>luo repositorio ja committaa masteriin tiedosto <strong>masteri1.txt</strong></li>
  <li>luo branch <strong>eka</strong>, siirry branchiin, luo sinne tiedosto <strong>eka.txt</strong> ja committaa</li>
  <li>siirry takaisin <strong>master</strong>-branchiin, tiedoston <strong>eka.txt</strong> ei pitäisi nyt näkyä
    <ul>
      <li><strong>huom:</strong> muistutus vielä siitä, että kun siirryt branchista toiseen varmista <strong>aina</strong> komennolla <em>git status</em> että kaikki muutokset on committoitu</li>
    </ul>
  </li>
  <li>lisää ja committaa <strong>masteriin</strong> tiedosto <strong>masteri2.txt</strong></li>
  <li>mene branchiin <strong>eka</strong> ja tarkasta, että <strong>masteriin</strong> lisätty tiedosto ei ole branchissa</li>
  <li>lisää branchiin tavaraa, esim. tiedosto <strong>eka2.txt</strong> ja committaa</li>
  <li>siirry takaisin <strong>master</strong>-branchiin</li>
  <li>tarkasta että <strong>eka</strong>-branchiin lisätyt muutokset eivät ole masterissa</li>
  <li>tarkastele komennolla <code>gitk --all</code> miltä repositorio ja branchit näyttävät (gitk toimii windowsilla ainakin Github for Windowsin Git Shellissä.)
    <ul>
      <li>gitk ei toimi maceissa, hyvä korvaaja sille on <a href="https://www.sourcetreeapp.com">sourcetree</a></li>
    </ul>
  </li>
  <li>mergeä branchin <strong>eka</strong> sisältö <strong>masteriin</strong></li>
  <li>katso jälleen miltä näyttää gitk –all</li>
</ul>

<h3 id="5-git-branchit-ja-staging-alue-versionhallinta">5. git: branchit ja staging-alue [versionhallinta]</h3>

<ul>
  <li>olet nyt repositoriosi master-haarassa</li>
  <li>luo uusi tiedosto <em>uusi_tiedosto.txt</em>, <strong>älä</strong> kuitenkaan lisää ja commitoi tiedostoa</li>
  <li>komennon <em>git status</em> tulostuksen pitäisi olla seuraava</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>On branch master
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

	uusi_tiedosto.txt

nothing added to commit but untracked files present (use "git add" to track)
</code></pre></div></div>

<ul>
  <li>siirry nyt branchiin <strong>eka</strong></li>
  <li>suorita uudelleen komento <em>git status</em></li>
  <li>huomaat, että tulostus on edelleen sama, tiedosto ei edelleenkään ole versionhallinnan alla</li>
  <li>eli vaikka olit master-haarassa kun loit tiedoston, ei master-haara eikä koko git tiedä tiedostosta vielä mitään ennen kuin lisäät sen versionhallinnan alaisuuteen komennolla <em>git add</em></li>
  <li>lisää tiedosto nyt versionhallinnan alaisuuteen ja commitoi se</li>
  <li>tiedosto menee nykyiseen branchiisi, eli branchiin <em>eka</em>, master ei edelleenkään tiedä tiedostosta mitään</li>
  <li>luo uusi tiedosto <em>uusi_tiedosto2.txt</em> ja lisää se versionhallintaan, älä kuitenkaan commitoi</li>
  <li>tarkasta että komennon <em>git status</em> tulos on</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>On branch eka
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

	new file:   uusi_tiedosto2.txt
</code></pre></div></div>

<ul>
  <li>olet siis branchissa <em>eka</em> ja <em>uusi_tiedosto2.txt</em> on lisätty staging-alueelle, sitä ei kuitenkaan ole vielä committoitu</li>
  <li>siirry nyt branchiin <strong>master</strong></li>
  <li>komennon <em>git status</em> tulos on edelleen sama, <em>uusi_tiedosto2.txt</em> on edelleen staging-alueella mutta committoimattomana</li>
  <li>staging-alue <strong>ei kuulu</strong> mihinkään branchiin, eli jos staging-alueella on committoimattomia muutoksia ja vaihdat branchia, säilyvät samat asiat stagingissa</li>
  <li>muutokset siirtyvät stagingista branchiin ainoastaan komennolla <em>git commit</em></li>
  <li>committoi nyt staging-alueen muutokset eli <em>uusi_tiedosto2.txt</em> masteriin</li>
  <li>komennon  <em>git status</em> tulos kertoo nyt että staging-alue on tyhjä:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>On branch master
nothing to commit, working tree clean
</code></pre></div></div>

<ul>
  <li>siirry jälleen branchiin <strong>eka</strong> ja huomaat, että <em>uusi_tiedosto2.txt</em> ei ole olemassa</li>
  <li>mergeä <strong>master</strong> branchiin <strong>eka</strong></li>
  <li>siirry nyt masteriin ja tuhoa branchi <strong>eka</strong></li>
  <li>tämän tehtävän ideana oli siis havainnollistaa, että working tree (muutokset joista git ei ole tietoinen) ja staging (gitiin lisättyihin tiedostoihin tehdyt committoimattomat muutokset)
<strong>eivät liity</strong> mihinkään branchiin, muutokset siirtyvät staging-alueelta branchiin ainoastaan komennon <em>git commit</em> suorituksen seurauksena</li>
</ul>

<h3 id="6-git-konflikti-versionhallinta">6. git: konflikti! [versionhallinta]</h3>

<p>Tee paikalliseen git-repoon seuraavat</p>

<ul>
  <li>lisää <strong>master</strong>-branchiin tiedosto <strong>tarkea.txt</strong>, kirjota sinne muutama rivi tekstiä ja committaa</li>
  <li>tee uusi branchi <strong>toka</strong>, mene branchiin ja editoi tiedoston <strong>tarkea.txt</strong> loppua (lisää esim loppuun muutama uusi rivi) ja committaa</li>
  <li>mene takaisin <strong>master</strong>-branchiin, editoi tiedoston <strong>tarkea.txt</strong> alkua (lisää alkuun muutama rivi) ja committaa</li>
  <li>mergeä branchin <strong>toka</strong> sisältö <strong>masteriin</strong>
    <ul>
      <li>mergeäminen aiheuttaa ns merge-commitin, ja avaa tekstieditorin mihin joudut kirjoittamaan commit-viestin
        <ul>
          <li>jos et ole määritellyt gitille editoria viime viikon <a href="/tehtavat1/">tehtävän 2</a> ohjeiden mukaan, avautuu ehkä gitin oletusarvoinen editori <a href="http://www.vim.org">vim</a></li>
          <li>vimistä poistuminen saattaa osoittautua ensikertalaiselle hankalaksi, google auttaa tarvittaessa</li>
        </ul>
      </li>
      <li>katso tiedoston <strong>tarkea.txt</strong>-sisältöä, sen pitäisi sisältää nyt molemmissa brancheissa tehdyt muutokset</li>
      <li><strong>huom:</strong> jo tässä vaiheessa saattaa syntyä konflikti jos olet vahingossa muuttanut merkkejä väärästä kohtaa tiedostoa! Toimi tällöin ao. ohjeen mukaan.</li>
    </ul>
  </li>
  <li>lisää jotain tiedoston loppuun ja committaa</li>
  <li>siirry branchiin <strong>toka</strong></li>
  <li>lisää jotain tiedoston <strong>tarkea.txt</strong> loppuun ja committaa</li>
  <li>mergeä branchin <strong>master</strong> sisältö branchiin <strong>toka</strong>
    <ul>
      <li>nyt pitäisi aiheutua konflikti, komento aiheuttaa tulostuksen
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Auto-merging tarkea.txt
CONFLICT (content): Merge conflict in tarkea.txt
Automatic merge failed; fix conflicts and then commit the result.
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>ratkaise konflikti:
    <ul>
      <li>editoi tiedoston <strong>tarkea.txt</strong> sisältö haluamaksesi</li>
      <li>ja toimi em. artikkelien ohjeen mukaan eli lisää konfliktoinut tiedosto staging-alueelle ja committoi</li>
    </ul>
  </li>
</ul>

<p>Jotkut editorit, esim <a href="https://code.visualstudio.com">visual studio code</a> sisältävät sisäänrakennetusti ns. <em>merge toolin</em>, joka osaa jossain määrin helpottaa konfliktien ratkaisua:</p>

<p><img src="https://github.com/mluukkai/ohjelmistotuotanto2017/raw/master/images/lh2-4a.png" alt="" /></p>

<h3 id="7-git-branchit-ja-github-versionhallinta">7. git: branchit ja GitHub [versionhallinta]</h3>

<p>Aloita lukemalla ProGit kirjasta luku <a href="http://git-scm.com/book/en/Git-Branching-Remote-Branches">Remote Branches</a></p>

<p>Lisätään seuraavaksi branch githubiin:</p>

<ul>
  <li>lisää tehtävien palauttamiseen käyttämäsi GitHub-repositorion paikalliseen kopioon branchit <strong>haara1</strong> ja <strong>haara2</strong></li>
  <li>mene branchiin <strong>haara1</strong>, lisää sinne tiedosto <strong>haara1.txt</strong> ja committaa</li>
  <li>mene branchiin <strong>haara2</strong>, lisää sinne tiedosto <strong>haara2.txt</strong> ja committaa</li>
  <li>pushaa uudet branchit GitHubiin</li>
  <li>tarkastele GitHub-repositoriota selaimella, varmista että branchit syntyvät ja niillä on haluttu sisältö</li>
</ul>

<p>Kloonaa GitHub-repositoriosta koneellesi toinen kopio</p>

<ul>
  <li>kuten huomaat, eivät branchit tule kloonattuun kopioon</li>
  <li>tee paikalliseen kopioon branch joka “träkkää” GitHub:issa olevan projektisi branchia <strong>haara1</strong> (ks. <a href="http://git-scm.com/book/en/Git-Branching-Remote-Branches">http://git-scm.com/book/en/Git-Branching-Remote-Branches</a> kohta Tracking Branches)</li>
  <li>lisää “träkkäävään” branchiin joku tiedosto, committaa ja pushaa branchi GitHubiin</li>
  <li>tarkastele GitHub-repositoriota selaimella, varmista että branchi päivittyy</li>
</ul>

<p>Mene GitHub-repon alkuperäiseen paikalliseen kopioon</p>

<ul>
  <li>mene branchiin <strong>haara1</strong> ja pullaa muutokset GitHub:in vastaavasta branchista
    <ul>
      <li>huom: koska kyseessä ei ole “träkkäävä” branchi, joudut pullaamaan komennolla <code>git pull origin haara1</code></li>
    </ul>
  </li>
  <li>mene branchiin <strong>haara2</strong>, lisää sitten tiedosto, committaa ja pushaa branchi GitHubiin
    <ul>
      <li>koska kyseessä ei ole “träkkäävä” branchi, ei vanhemmilla gitin versiolla komento <em>git push</em> riitä vaan joudut määrittelemään branchin jonne push kohdistuu eli antamaan komennon <code>git push origin haara2</code></li>
      <li>uudemmilla gitin versioilla pushaus onnistuu suoraan</li>
    </ul>
  </li>
</ul>

<p>Mene jälleen toiseen kopioon</p>

<ul>
  <li>suorita komento <code>git remote show origin</code>
    <ul>
      <li>komento kertoo ‘origin’:issa eli githubissa olevien branchien ja paikallisten branchien suhteen</li>
    </ul>
  </li>
  <li>tee sinne GitHub:issa olevan projektisi branchia <strong>haara2</strong> träkkäävä branch</li>
  <li>suorita jälleen <code>git remote show origin</code>, mitä muutoksia huomaat?</li>
  <li>tee branchiin muutoksia ja pushaa ne githubiin
    <ul>
      <li>huom: koska kyseessä on träkkäävä branch, riittää git push</li>
    </ul>
  </li>
  <li>tarkastele GitHub-repositoriota selaimella, varmista että branchi päivittyy</li>
</ul>

<p>Palaa vielä alkuperäiseen lokaaliin repositorioon</p>

<ul>
  <li>suorita komento <code>git remote show origin</code></li>
  <li>tulostus kertoo, että lokaaleista haaroista ainoastaan <em>master</em> on konfiguroitu komennon <em>git pull</em> osalta, eli on träkkäävä branchi:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* remote origin
  Fetch URL: git@github.com:mluukkai/ohtu-2019-viikko1.git
  Push  URL: git@github.com:mluukkai/ohtu-2019-viikko1.git
  HEAD branch: master
  Remote branches:
    haara1 tracked
    haara2 tracked
    master tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local refs configured for 'git push':
    haara1 pushes to haara1 (up to date)
    haara2 pushes to haara2 (up to date)
    master pushes to master (up to date)
</code></pre></div></div>
<ul>
  <li>suorita <em>git pull</em> branchissä <em>haara1</em></li>
  <li>komennon tuloste antaa ohjeen, miten saat konfiguroitua <em>haara1</em>:n träkkäämään githubissa olevaa haaraa:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>There is no tracking information for the current branch.
Please specify which branch you want to merge with.
See git-pull(1) for details.

    git pull &lt;remote&gt; &lt;branch&gt;

If you wish to set tracking information for this branch you can do so with:

    git branch --set-upstream-to=origin/&lt;branch&gt; haara1
 
</code></pre></div></div>

<ul>
  <li>Kun annat komennon, sen jälkeen haara träkkää githubissa olevaa haaraa ja komento <em>git pull</em> voidaan antaa ilman parametreja</li>
</ul>

<p>Branchien kanssa työskentely voi aluksi tuntua sekavalta varsinkin jos GitHub:issa on myös useita brancheja.</p>

<h3 id="mihin-brancheja-käytetään">Mihin brancheja käytetään?</h3>

<p>Ohjelmistotiimi voi soveltaa Gitin branchaystä hyvin monella eri tyylillä. Artikkeli
<a href="https://www.atlassian.com/git/tutorials/comparing-workflows">https://www.atlassian.com/git/tutorials/comparing-workflows</a> esittele tähän muutamia vaihtoehtoja. Eräs yleinen tapa branchien käyttöön ovat ns. <em>featurebranchit</em>:</p>

<blockquote>
  <p>The core idea behind the Feature Branch Workflow is that all feature development should take place in a dedicated branch instead of the master branch. This encapsulation makes it easy for multiple developers to work on a particular feature without disturbing the main codebase. It also means the master branch will never contain broken code, which is a huge advantage for continuous integration environments.</p>
</blockquote>

<p>Jos kiinnostaa, lue lisää yo. dokumentista.</p>

<h3 id="8-git-epäajantasaisen-kopion-pushaaminen-versionhallinta">8. git: epäajantasaisen kopion pushaaminen [versionhallinta]</h3>

<p>Demonstroidaan usein esiintyvää tilannetta, jossa epäajantasaisen repositorion pushaaminen githubissa olevaan etärepositorioon epäonnistuu.</p>

<ul>
  <li>mene alkuperäisen repositorion paikallisen kopion <strong>master</strong> -haaraan, tee joku muutos, commitoi ja pushaa se githubiin</li>
  <li>mene toisen kopion <strong>master</strong>-haaraan ja  tee sinne joku muutos</li>
  <li>commitoi ja pushaa muutos githubiin</li>
  <li>kaikki ei kuitenkaan mene hyvin, seurauksena on seuraavantyylinen virheilmoitus:</li>
</ul>

<pre>
$ git push
To git@github.com:mluukkai/ohtu-viikko1-2019.git
 ! [rejected]        master -&gt; master (fetch first)
error: failed to push some refs to 'git@github.com:mluukkai/ohtu-viikko1-2019.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first merge the remote changes (e.g.,
hint: 'git pull') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
$ 
</pre>

<p>Virheen syynä on se, että githubissa oleva <strong>master</strong>-haara oli edellä paikallisen repositorion <strong>master</strong>-haaraa. Ongelma korjaantuu tekemällä ensin <code>git pull</code>, ratkaisemalla mahdolliset konfliktit ja pushaamalla sitten uudelleen</p>
<ul>
  <li>komennon <em>git pull</em> yhteydessä syntyy merge-commit, ja avautuu tekstieditori mihin joudut kirjoittamaan commit-viestin</li>
  <li>eli toimi näin ja varmista, että tekemäsi muutokset menevät githubiin</li>
</ul>

<h3 id="9-riippuvuuksien-injektointi-osa-3-verkkokauppa">9. riippuvuuksien injektointi osa 3: Verkkokauppa</h3>

<p>Tutustuimme viime viikon <a href="/tehtavat1#14-riippuvuuksien-injektointi-osa-1">tehtävissä 14-16</a> riippuvuuksien injektointiin ja sovelsimme sitä yksikkötestauksen helpottamiseen.</p>

<p>Jos asia on päässyt unohtumaan, voit kerrata asian lukemalla <a href="/riippuvuuksien_injektointi/">tämän</a>.</p>

<p>Kurssirepositorion hakemistossa <a href="https://github.com/ohjelmistotuotanto-hy/syksy2019/tree/master/koodi/viikko2/Verkkokauppa1">koodi/viikko2/Verkkokauppa1</a> on yksinkertaisen verkkokaupan ohjelmakoodi</p>

<ul>
  <li>Hae projekti kurssirepositoriosta
    <ul>
      <li>järkevintä lienee että kloonaat kurssirepositorion paikalliselle koneellesi jos et ole sitä jo tehnyt, jos olet, niin pullaa repositorio ajantasalle</li>
      <li><strong>tämän jälkeen kannattaa kopioida projekti tehtävien palautukseen käyttämäsi repositorion sisälle</strong></li>
    </ul>
  </li>
  <li>Tutustu koodiin, piirrä luokkakaavio ohjelman rakenteesta
    <ul>
      <li>luokkakaavioita ei tarvitse palauttaa…</li>
    </ul>
  </li>
  <li>Ohjelman luokista <code>Pankki</code>, <code>Varasto</code>, <code>Viitegeneraattori</code> ja <code>Kirjanpito</code> ovat sellaisia, että niistä on tarkoitus olla olemassa ainoastaan yksi olio. Tälläisiä ainutkertaisia olioita sanotaan <strong>singletoneiksi</strong>. Koodissa singletonit ovat toteutettu “klassisella tavalla”, eli piilottamalla konstruktori ja käyttämällä staattista muuttujaa ja metodia säilömään ja palauttamaan luokan ainoa olio
    <ul>
      <li>Singleton on ns. <a href="https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612">GoF-kirjan</a> yksi alkuperäisistä suunnittelumalleista, lue lisää singletoneista esim. <a href="https://sourcemaking.com/design_patterns/singleton">täältä</a></li>
      <li>Singleton ei ole erinäisistä syistä enää oikein muodissa, ja korvaamme sen seuraavassa tehtävässä</li>
    </ul>
  </li>
  <li>Kuten huomaamme, on koodissa toivottoman paljon konkreettisia riippuvuuksia:
    <ul>
      <li>Varasto –&gt; Kirjanpito</li>
      <li>Pankki –&gt; Kirjanpito</li>
      <li>Kauppa –&gt; Pankki</li>
      <li>Kauppa –&gt; Viitegeneraatori</li>
      <li>Kauppa –&gt; Varasto</li>
    </ul>
  </li>
  <li><strong>Poista luokan <code>Kauppa</code> konkreettiset riippuvuudet</strong> yllä mainittuihin luokkiin <em>rajapintojen avulla</em>
    <ul>
      <li>riippuvuus luokkaan Ostoskori voi jäädä, sillä se on ainoastaan luokan Kauppa sisäisesti käyttämä luokka ja täten varsin harmiton</li>
      <li><em>HUOM!:</em> NetBeansissa on automaattinen refaktorointiominaisuus, jonka avulla luokasta saa helposti generoitua rajapinnan, jolla on samat metodit kuin luokalla. Klikkaa luokan kohdalla hiiren oikeaa nappia, valitse refactor ja “extract interface”</li>
      <li>muut riippuvuudet jätetään vielä</li>
    </ul>
  </li>
  <li><strong>Määrittele luokalle <code>Kauppa</code> sopiva konstruktori</strong>, jotta voit injektoida riippuvuudet, konstruktorin parametrien tulee olla tyypiltään <em>rajapintoja</em></li>
  <li>Älä käytä luokan <em>Kauppa</em> sisällä enää konkreettisia luokkia  <em>Varasto</em>, <em>Viitegeneraattori</em> ja <em>Pankki</em> vaan ainoastaan niitä vastaavia rajapintoja!</li>
  <li><strong>Muokkaa pääohjelmasi</strong>, siten että se luo kaupan seuraavasti:</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Kauppa</span> <span class="n">kauppa</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Kauppa</span><span class="o">(</span>
  <span class="n">Varasto</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(),</span> 
  <span class="n">Pankki</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(),</span> 
  <span class="n">Viitegeneraattori</span><span class="o">.</span><span class="na">getInstance</span><span class="o">()</span> 
<span class="o">);</span>
</code></pre></div></div>

<ul>
  <li>Varmista ohjelman toimivuus suorittamalla se komentoriviltä komennolla <em>gradle run</em></li>
</ul>

<h3 id="10-riippuvuuksien-injektointi-osa-4-ei-enää-singletoneja-verkkokaupassa">10. riippuvuuksien injektointi osa 4: ei enää singletoneja verkkokaupassa</h3>

<ul>
  <li>Singleton-suunnittelumallia pidetään <a href="http://rcardin.github.io/design/programming/2015/07/03/the-good-the-bad-and-the-singleton.html">osittain ongelmallisena</a>, poistammekin edellisestä tehtävästä singletonit</li>
  <li><strong>Poista</strong> kaikista luokista <code>getInstance</code>-metodit ja staattinen <code>instance</code>-muuttuja
    <ul>
      <li>joudut muuttamaan luokilla olevat private-konstruktorit julkisiksi</li>
    </ul>
  </li>
  <li><strong>Poista</strong> rajapintojen ja riippuvuuksien injektoinnin avulla edellisen tehtävän jäljiltä jääneet riippuvuudet, eli
    <ul>
      <li>Varasto –&gt; Kirjanpito</li>
      <li>Pankki –&gt; Kirjanpito</li>
    </ul>
  </li>
  <li><strong>Muokkaa pääohjelmasi</strong> vastaamaan uutta tilannetta, eli suunnilleen muotoon:</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Viitegeneraattori</span> <span class="n">viitegen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Viitegeneraattori</span><span class="o">();</span>
<span class="n">Kirjanpito</span> <span class="n">kirjanpito</span>      <span class="o">=</span> <span class="k">new</span> <span class="n">Kirjanpito</span><span class="o">();</span>
<span class="n">Varasto</span> <span class="n">varasto</span>            <span class="o">=</span> <span class="k">new</span> <span class="n">Varasto</span><span class="o">(</span><span class="n">kirjanpito</span><span class="o">);</span>
<span class="n">Pankki</span> <span class="n">pankki</span>              <span class="o">=</span> <span class="k">new</span> <span class="n">Pankki</span><span class="o">(</span><span class="n">kirjanpito</span><span class="o">);</span>
<span class="n">Kauppa</span> <span class="n">kauppa</span>              <span class="o">=</span> <span class="k">new</span> <span class="n">Kauppa</span><span class="o">(</span><span class="n">varasto</span><span class="o">,</span> <span class="n">pankki</span><span class="o">,</span> <span class="n">viitegen</span><span class="o">);</span>
</code></pre></div></div>

<p>Kuten huomaamme, alkaa kaupan konfigurointi olla aika vaivalloista…</p>

<h3 id="11-spring-osa-1-riippuvuuksien-injektointi">11 Spring osa 1: riippuvuuksien injektointi</h3>

<p>Kurssilla <a href="https://courses.helsinki.fi/fi/tkt21007">Web-palvelinohjelmointi</a> käytettävä <a href="https://spring.io/">Spring</a>-sovelluskehys tarjoaa pelastuksen käsillä olevaan tilanteeseen.</p>

<p>Lue nyt <a href="/riippuvuuksien_injektointi_spring/">täällä oleva</a> kuvaus miten riippuvuuksien injektointi voidaan automatisoida Springillä</p>

<blockquote>
  <p>Tulet todennäköisesti saamaan Springiä käyttäessäsi pitkiä ja kryptiseltä vaikuttavia virheilmoituksia. Lue virheilmoitusten <em>stack trace</em> huolellisesti läpi, yleensä se antaa vihjeitä siitä, missä vika on. Virheilmoitusten tulkitseminen ja virheiden etsiminen on yksi tärkeimpiä taitoja ohjelmistoalalla, se voi tuntua ikävältä, mutta oikoteitä ei ole. Usein googlailu ja stack overflow auttavat, mutta kaikesta ei selviä pelkällä trial and error -menetelmällä. Usein käytettävän kirjaston toimintaa on ymmärrettävä jollain tasolla, jotta virheiden jäljitys onnistuu.</p>

  <p>Itse käytän virheiden jäljityksessä ns. paranoidimoodia. Jos olen epävarma siitä mitä teen (liittyen koodiin tai konfigurointiin), testaan lähes jokaisen rivin jälkeen, että toiminnallisuus on halutun kaltainen. Varmin keino aiheuttaa paljon kryptisiä virheitä on se, että testaa koodia mahdollisimman harvoin. Tällöin virheiden jäljitys on vaikeaa, sillä lisättyjä rivejä saattaa olla paljon ja virheen aiheuttaja ei välttämättä ole ilmeinen. Tälläisissä tilanteissa kannattaa esim. kommentoida lisätty koodi pois ja palauttaa lisäykset rivi kerrallaan.</p>
</blockquote>

<h3 id="12-spring-osa-2-verkkokauppa-siistiksi">12 Spring osa 2: Verkkokauppa siistiksi</h3>

<p>Palataan sitten verkkokaupan pariin.</p>

<ul>
  <li>Projektiin on konfiguroitu valmiiksi springin tarvitsemat riippuvuudet, sekä konfiguraatiot
    <ul>
      <li><em>HUOM!</em> mahdolliset virheilmoitukset <strong>“org.springframework… package does not exist”</strong> katoavat kun buildaat projektin ensimmäisen kerran!</li>
    </ul>
  </li>
  <li>Ota riippuvuuksien injektointi käyttöön lisäämällä luokille annotaatioita <code>@Component</code> ja <code>@Autowired</code></li>
  <li>Aloita muuttamalla pääohjelma siten, että ainoastaan viitegeneraattori luodaan Springin avulla. Muutos on suunnilleen seuraava:</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">AppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 
    <span class="n">Viitegeneraattori</span> <span class="n">viitegen</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">Viitegeneraattori</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">Kirjanpito</span> <span class="n">kirjanpito</span>      <span class="o">=</span> <span class="k">new</span> <span class="n">Kirjanpito</span><span class="o">();</span>
    <span class="n">Varasto</span> <span class="n">varasto</span>            <span class="o">=</span> <span class="k">new</span> <span class="n">Varasto</span><span class="o">(</span><span class="n">kirjanpito</span><span class="o">);</span>
    <span class="n">Pankki</span> <span class="n">pankki</span>              <span class="o">=</span> <span class="k">new</span> <span class="n">Pankki</span><span class="o">(</span><span class="n">kirjanpito</span><span class="o">);</span>
    <span class="n">Kauppa</span> <span class="n">kauppa</span>              <span class="o">=</span> <span class="k">new</span> <span class="n">Kauppa</span><span class="o">(</span><span class="n">varasto</span><span class="o">,</span> <span class="n">pankki</span><span class="o">,</span> <span class="n">viitegen</span><span class="o">);</span>

    <span class="c1">//...</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Muuta seuraavaksi muutkin luokat käyttämään Springin riippuvuuksien injektointia, jolloin pääohjelman alku muuttuu muotoon:</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">AppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 
    <span class="n">Kauppa</span> <span class="n">kauppa</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">Kauppa</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Huom: pääohjelma tarvitsee kaupan lisäksi kirjanpito-olioa lopun tulostuksessa, sen saa haltuunsa Springin kontekstilta metodikutsulla <em>ctx.getBean(Kirjanpito.class)</em></li>
</ul>

<h3 id="tehtävien-palautus">Tehtävien palautus</h3>

<p>Pushaa kaikki tekemäsi tehtävät (paitsi ne joissa mainitaan, että tehtävää ei palauteta mihinkään) GitHubiin ja merkkaa tekemäsi tehtävät palautussovellukseen <a href="https://study.cs.helsinki.fi/stats/courses/ohtu-avoin-2020">https://study.cs.helsinki.fi/stats/courses/ohtu-avoin-2020</a></p>

  </div>

</article>
      </div>
    </main>

     <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading"></h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
             Ohjelmistotuotanto avoin yliopisto 2020 
          </li>
          <li>
            <a href="mailto:matti.luukkainen@helsinki.fi">matti.luukkainen@helsinki.fi</a>
          </li>
          <li>
            <a href="https://github.com/mluukkai"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">mluukkai</span></a>

          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
           
        </ul>
      </div>

      <div class="footer-col footer-col-3">
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
            <img alt="Creative Commons -lisenssi" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png"
            />
          </a>
          <br/> Materiaali on lisensoitu
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons BY-NC-SA 3.0 -lisenssillä</a>.
      </div>
    </div>

  </div>

</footer>
  
  </body>

</html>
